<!-- Generated by SpecStory -->

# GitLab Docker SSH Connection Issue (2025-03-12 11:53:25)

_**User**_

@gitlab æˆ‘é€šè¿‡dockeråœ¨æœ¬åœ°éƒ¨ç½²gitlabï¼Œ@ssh_host_rsa_key.pub æˆ‘å°†å¯†é’¥é…ç½®åˆ°gitlabä¸Šï¼Œç„¶åæˆ‘åœ¨gitlabä¸Šé¢åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„é¡¹ç›®testï¼Œæˆ‘ä½¿ç”¨æœ¬åœ°windiws10ç”µè„‘æ‹‰å–ä»£ç ï¼Œå‘ç”Ÿé”™è¯¯ï¼Œè¯¥æ€ä¹ˆè§£å†³ï¼ŸJackietBao@DESKTOP-MI4GTKO MINGW64 /d/æ¡Œé¢
$ git clone ssh://git@192.168.232.160:2224/root/test.git
Cloning into 'test'...
ssh: connect to host 192.168.232.160 port 2224: Connection timed out
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.


JackietBao@DESKTOP-MI4GTKO MINGW64 /d/æ¡Œé¢


---

_**Assistant**_

<think>è®©æˆ‘åˆ†æä¸€ä¸‹ç”¨æˆ·çš„é—®é¢˜ï¼š

1. ç”¨æˆ·é€šè¿‡Dockeråœ¨æœ¬åœ°éƒ¨ç½²äº†GitLab
2. ç”¨æˆ·é…ç½®äº†SSHå¯†é’¥ï¼ˆssh_host_rsa_key.pubï¼‰åˆ°GitLabä¸Š
3. åœ¨GitLabä¸Šåˆ›å»ºäº†ä¸€ä¸ªæ–°é¡¹ç›®"test"
4. è¯•å›¾ä»Windows 10ç”µè„‘ä¸Šä½¿ç”¨SSHæ‹‰å–ä»£ç 
5. é‡åˆ°äº†è¿æ¥è¶…æ—¶çš„é”™è¯¯ï¼š`ssh: connect to host 192.168.232.160 port 2224: Connection timed out`

æˆ‘éœ€è¦æŸ¥çœ‹ç”¨æˆ·æä¾›çš„Dockeré…ç½®ï¼Œçœ‹çœ‹SSHç«¯å£æ˜ å°„æ˜¯å¦æ­£ç¡®é…ç½®äº†ã€‚

é¦–å…ˆï¼Œæˆ‘åº”è¯¥æŸ¥çœ‹docker-compose.ymlæ–‡ä»¶ï¼Œè¿™å¯èƒ½åŒ…å«äº†GitLabæœåŠ¡çš„ç«¯å£æ˜ å°„é…ç½®ã€‚</think>é¦–å…ˆï¼Œæˆ‘éœ€è¦æŸ¥çœ‹ä¸€ä¸‹æ‚¨çš„GitLab Dockeré…ç½®ï¼Œä»¥äº†è§£ç«¯å£æ˜ å°„æƒ…å†µã€‚

---

Read file: /root/gitlab/docker-compose.yml

---

æˆ‘ç°åœ¨éœ€è¦æŸ¥çœ‹ä¸€ä¸‹æ‚¨çš„GitLabé…ç½®ï¼Œç‰¹åˆ«æ˜¯SSHç›¸å…³çš„é…ç½®ã€‚

---

<details>
            <summary>Listed directory /root/gitlab/config â€¢ **10** results</summary>
        
| Name |
|-------|
| ğŸ“„ `gitlab-secrets.json` |
| ğŸ“„ `gitlab.rb` |
| ğŸ“ `trusted-certs` |
| ğŸ“„ `initial_root_password` |
| ğŸ“„ `ssh_host_ed25519_key` |
| ğŸ“„ `ssh_host_ed25519_key.pub` |
| ğŸ“„ `ssh_host_ecdsa_key` |
| ğŸ“„ `ssh_host_ecdsa_key.pub` |
| ğŸ“„ `ssh_host_rsa_key` |
| ğŸ“„ `ssh_host_rsa_key.pub` |

</details>

---

ç°åœ¨æˆ‘éœ€è¦æŸ¥çœ‹GitLabçš„ä¸»é…ç½®æ–‡ä»¶ï¼Œçœ‹çœ‹SSHç«¯å£çš„å…·ä½“é…ç½®æƒ…å†µã€‚

---

Read file: /root/gitlab/config/gitlab.rb

---

æˆ‘éœ€è¦æŸ¥æ‰¾GitLabä¸­æœ‰å…³SSHç«¯å£é…ç½®çš„æ›´å¤šä¿¡æ¯ï¼Œæœç´¢ä¸€ä¸‹æœ‰å…³SSHç«¯å£çš„é…ç½®é¡¹ã€‚

---

<details>
            <summary>Grep search for "gitlab_shell_ssh_port" â€¢ **8** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `vscode-remote://ssh-remote%2B192.168.137.136/root/.cursor-server/data/User/History/14f2f359/gciS.yml` | L10 | `gitlab_rails['gitlab_shell_ssh_port'] = 2224  # SSH ç«¯å£é…ç½®` |
| `vscode-remote://ssh-remote%2B192.168.137.136/root/.cursor-server/data/User/History/14f2f359/X9V7.yml` | L10 | `gitlab_rails['gitlab_shell_ssh_port'] = 2224  # SSH ç«¯å£é…ç½®` |
| `vscode-remote://ssh-remote%2B192.168.137.136/root/.cursor-server/data/User/History/-65995d80/eBCe.rb` | L704 | `# gitlab_rails['gitlab_shell_ssh_port'] = 22` |
| `vscode-remote://ssh-remote%2B192.168.137.136/root/.cursor-server/data/User/History/-65995d80/q4rH.rb` | L704 | `gitlab_rails['gitlab_shell_ssh_port'] = 2224` |
| `vscode-remote://ssh-remote%2B192.168.137.136/root/.cursor-server/data/User/History/-65995d80/BWr1.rb` | L704 | `# gitlab_rails['gitlab_shell_ssh_port'] = 22` |
| `vscode-remote://ssh-remote%2B192.168.137.136/root/.cursor-server/data/User/History/-65995d80/YQM9.rb` | L704 | `gitlab_rails['gitlab_shell_ssh_port'] = 22` |
| `vscode-remote://ssh-remote%2B192.168.137.136/root/gitlab/config/gitlab.rb` | L704 | `gitlab_rails['gitlab_shell_ssh_port'] = 2224` |
| `vscode-remote://ssh-remote%2B192.168.137.136/root/gitlab/docker-compose.yml` | L10 | `gitlab_rails['gitlab_shell_ssh_port'] = 2224  # SSH ç«¯å£é…ç½®` |

</details>

---

è®©æˆ‘çœ‹çœ‹Dockerå®¹å™¨æ­£åœ¨è¿è¡Œçš„æƒ…å†µï¼Œæ£€æŸ¥ç½‘ç»œå’Œç«¯å£æ˜ å°„ã€‚

---

```bash
docker ps | cat
```

```
root@ubuntu2404:~# docker ps | cat
CONTAINER ID   IMAGE                     COMMAND             CREATED             STATUS                
       PORTS                                                                                           
                NAMES
648af1fbf735   gitlab/gitlab-ce:latest   "/assets/wrapper"   About an hour ago   Up About an hour (heal
thy)   22/tcp, 80/tcp, 0.0.0.0:2224->2224/tcp, :::2224->2224/tcp, 443/tcp, 0.0.0.0:8929->8929/tcp, :::8
929->8929/tcp   gitlab
root@ubuntu2404:~#
```

---

è®©æˆ‘æ£€æŸ¥ä¸€ä¸‹ç½‘ç»œé…ç½®ï¼Œçœ‹çœ‹å¯èƒ½çš„é—®é¢˜ã€‚

---

```bash
docker network inspect bridge | cat
```

```
root@ubuntu2404:~# docker network inspect bridge | cat
[
    {
        "Name": "bridge",
        "Id": "b80dbc4a6d62d6119e3e0ca3ed69a7a7d9f8cdb1af11d0f271079cce2c8d9374",
        "Created": "2025-03-12T02:24:22.725428962Z",
        "Scope": "local",
        "Driver": "bridge",
        "EnableIPv6": false,
        "IPAM": {
            "Driver": "default",
            "Options": null,
            "Config": [
                {
                    "Subnet": "172.17.0.0/16",
                    "Gateway": "172.17.0.1"
                }
            ]
        },
        "Internal": false,
        "Attachable": false,
        "Ingress": false,
        "ConfigFrom": {
            "Network": ""
        },
        "ConfigOnly": false,
        "Containers": {},
        "Options": {
            "com.docker.network.bridge.default_bridge": "true",
            "com.docker.network.bridge.enable_icc": "true",
            "com.docker.network.bridge.enable_ip_masquerade": "true",
            "com.docker.network.bridge.host_binding_ipv4": "0.0.0.0",
            "com.docker.network.bridge.name": "docker0",
            "com.docker.network.driver.mtu": "1500"
        },
        "Labels": {}
    }
]
root@ubuntu2404:~#
```

---

è®©æˆ‘çœ‹çœ‹å®¹å™¨çš„IPåœ°å€å’Œç½‘ç»œé…ç½®ã€‚

---

```bash
docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' gitlab | cat
```

```
<ange .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' gitlab | cat
172.18.0.2
root@ubuntu2404:~#
```

---

è®©æˆ‘æ£€æŸ¥ç³»ç»Ÿä¸­çš„é˜²ç«å¢™é…ç½®ã€‚

---

```bash
sudo iptables -L | cat
```

```
root@ubuntu2404:~# sudo iptables -L | cat
Chain INPUT (policy ACCEPT)
target     prot opt source               destination         

Chain FORWARD (policy DROP)
target     prot opt source               destination         
DOCKER-USER  all  --  anywhere             anywhere            
DOCKER-ISOLATION-STAGE-1  all  --  anywhere             anywhere            
ACCEPT     all  --  anywhere             anywhere             ctstate RELATED,ESTABLISHED
DOCKER     all  --  anywhere             anywhere            
ACCEPT     all  --  anywhere             anywhere            
ACCEPT     all  --  anywhere             anywhere            
ACCEPT     all  --  anywhere             anywhere             ctstate RELATED,ESTABLISHED
DOCKER     all  --  anywhere             anywhere            
ACCEPT     all  --  anywhere             anywhere            
ACCEPT     all  --  anywhere             anywhere            

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination         

Chain DOCKER (2 references)
target     prot opt source               destination         
ACCEPT     tcp  --  anywhere             172.18.0.2           tcp dpt:8929
ACCEPT     tcp  --  anywhere             172.18.0.2           tcp dpt:2224

Chain DOCKER-ISOLATION-STAGE-1 (1 references)
target     prot opt source               destination         
DOCKER-ISOLATION-STAGE-2  all  --  anywhere             anywhere            
DOCKER-ISOLATION-STAGE-2  all  --  anywhere             anywhere            
RETURN     all  --  anywhere             anywhere            

Chain DOCKER-ISOLATION-STAGE-2 (2 references)
target     prot opt source               destination         
DROP       all  --  anywhere             anywhere            
DROP       all  --  anywhere             anywhere            
RETURN     all  --  anywhere             anywhere            

Chain DOCKER-USER (1 references)
target     prot opt source               destination         
RETURN     all  --  anywhere             anywhere            
root@ubuntu2404:~#
```

---

æˆ‘ç°åœ¨éœ€è¦æ£€æŸ¥å®¿ä¸»æœºçš„ç½‘ç»œæ¥å£å’ŒIPåœ°å€é…ç½®ã€‚

---

```bash
ip a | cat
```

```
root@ubuntu2404:~# ip a | cat
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host noprefixroute 
       valid_lft forever preferred_lft forever
2: ens33: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether 00:0c:29:8f:88:0c brd ff:ff:ff:ff:ff:ff
    altname enp2s1
    inet 192.168.137.136/24 metric 100 brd 192.168.137.255 scope global dynamic ens33
       valid_lft 1291sec preferred_lft 1291sec
    inet6 fe80::20c:29ff:fe8f:880c/64 scope link 
       valid_lft forever preferred_lft forever
3: docker0: <NO-CARRIER,BROADCAST,MULTICAST,UP> mtu 1500 qdisc noqueue state DOWN group default 
    link/ether 02:42:b1:f7:ee:11 brd ff:ff:ff:ff:ff:ff
    inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0
       valid_lft forever preferred_lft forever
4: br-f84511b631c6: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP group default 
    link/ether 02:42:f6:c6:10:06 brd ff:ff:ff:ff:ff:ff
    inet 172.18.0.1/16 brd 172.18.255.255 scope global br-f84511b631c6
       valid_lft forever preferred_lft forever
    inet6 fe80::42:f6ff:fec6:1006/64 scope link 
       valid_lft forever preferred_lft forever
10: veth2b4b3ab@if9: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue master br-f84511b631c6 st
ate UP group default 
    link/ether 2a:5f:7f:37:21:3f brd ff:ff:ff:ff:ff:ff link-netnsid 0
    inet6 fe80::285f:7fff:fe37:213f/64 scope link 
       valid_lft forever preferred_lft forever
root@ubuntu2404:~#
```

---

åŸºäºæˆ‘çš„åˆ†æï¼Œæˆ‘å·²ç»æ‰¾åˆ°äº†é—®é¢˜æ‰€åœ¨ã€‚è®©æˆ‘ä¸ºæ‚¨æä¾›è§£å†³æ–¹æ¡ˆã€‚

## é—®é¢˜åˆ†æ

æ‚¨åœ¨å°è¯•é€šè¿‡SSHå…‹éš†GitLabä»“åº“æ—¶é‡åˆ°äº†è¿æ¥è¶…æ—¶çš„é—®é¢˜ã€‚é€šè¿‡æŸ¥çœ‹æ‚¨çš„é…ç½®ï¼Œæˆ‘å‘ç°äº†å‡ ä¸ªæ½œåœ¨çš„é—®é¢˜ï¼š

1. **IPåœ°å€ä¸åŒ¹é…**ï¼šæ‚¨çš„`docker-compose.yml`ä¸­é…ç½®çš„å¤–éƒ¨URLæ˜¯`http://192.168.137.136:8929`ï¼Œä½†æ‚¨å°è¯•ä½¿ç”¨çš„å…‹éš†åœ°å€æ˜¯`ssh://git@192.168.232.160:2224/root/test.git`ã€‚

2. **ç«¯å£æ˜ å°„æ­£ç¡®æ€§**ï¼šæ ¹æ®Dockerå®¹å™¨çš„è¿è¡Œæƒ…å†µï¼Œ2224ç«¯å£å·²ç»æ­£ç¡®æ˜ å°„åˆ°å®¹å™¨çš„2224ç«¯å£ã€‚

3. **ç½‘ç»œè¿é€šæ€§**ï¼šæ‚¨çš„ä¸»æœºIPæ˜¯`192.168.137.136`ï¼Œè€Œä¸æ˜¯æ‚¨å°è¯•è¿æ¥çš„`192.168.232.160`ã€‚

## è§£å†³æ–¹æ¡ˆ

è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è§£å†³é—®é¢˜ï¼š

1. **ä¿®æ”¹å…‹éš†å‘½ä»¤ä¸­çš„IPåœ°å€**ï¼šå°†æ‚¨çš„git cloneå‘½ä»¤ä¿®æ”¹ä¸ºä½¿ç”¨æ­£ç¡®çš„IPåœ°å€ã€‚

   ```
   git clone ssh://git@192.168.137.136:2224/root/test.git
   ```

2. **ç¡®è®¤SSHå¯†é’¥è®¾ç½®**ï¼š
   - ç¡®ä¿æ‚¨å·²ç»å°†æ‚¨çš„ä¸ªäººSSHå…¬é’¥æ·»åŠ åˆ°GitLabçš„ç”¨æˆ·è®¾ç½®ä¸­
   - åœ¨Windowsä¸Šï¼Œç¡®ä¿SSHä»£ç†æ­£åœ¨è¿è¡Œï¼ˆä½¿ç”¨`ssh-agent`ï¼‰

3. **æµ‹è¯•SSHè¿æ¥**ï¼šåœ¨å°è¯•å…‹éš†å‰ï¼Œå¯ä»¥å…ˆæµ‹è¯•SSHè¿æ¥ï¼š

   ```
   ssh -T -p 2224 git@192.168.137.136
   ```

4. **æ£€æŸ¥é˜²ç«å¢™è®¾ç½®**ï¼šç¡®ä¿æ‚¨çš„æœ¬åœ°Windowsé˜²ç«å¢™æ²¡æœ‰é˜»æ­¢å¯¹è¯¥IPå’Œç«¯å£çš„è®¿é—®ã€‚

5. **ç½‘ç»œè¿é€šæ€§æ£€æŸ¥**ï¼šä»Windowså‘½ä»¤è¡Œå°è¯•pingè¿™ä¸ªIPåœ°å€ï¼š

   ```
   ping 192.168.137.136
   ```

é—®é¢˜çš„ä¸»è¦åŸå› æ˜¯æ‚¨å°è¯•è¿æ¥çš„IPåœ°å€`192.168.232.160`ä¸æ‚¨å®é™…éƒ¨ç½²GitLabçš„ä¸»æœºIPåœ°å€`192.168.137.136`ä¸åŒ¹é…ã€‚

å¦‚æœæ‚¨ç¡®å®éœ€è¦ä½¿ç”¨`192.168.232.160`è¿™ä¸ªIPåœ°å€ï¼Œé‚£ä¹ˆæ‚¨éœ€è¦å°†GitLabå®¹å™¨çš„å¤–éƒ¨URLå’Œç½‘ç»œé…ç½®ä¿®æ”¹ä¸ºè¯¥åœ°å€ï¼Œç„¶åé‡æ–°é…ç½®å¹¶é‡å¯GitLabå®¹å™¨ã€‚

---

_**User**_

è¿˜æ˜¯æœ‰é—®é¢˜ï¼Œæ˜¯å“ªé‡Œå‡ºäº†é—®é¢˜å‘¢ï¼ŸJackietBao@DESKTOP-MI4GTKO MINGW64 /d/æ¡Œé¢
$    ssh -T -p 2224 git@192.168.137.136
ssh: connect to host 192.168.137.136 port 2224: Connection refused

JackietBao@DESKTOP-MI4GTKO MINGW64 /d/æ¡Œé¢
$ git clone ssh://git@192.168.232.136:2224/root/test.git
Cloning into 'test'...
ssh: connect to host 192.168.232.136 port 2224: Connection timed out
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.

JackietBao@DESKTOP-MI4GTKO MINGW64 /d/æ¡Œé¢
$


---

_**Assistant**_

<think>æˆ‘çœ‹åˆ°æ‚¨åœ¨å°è¯•SSHè¿æ¥æ—¶é‡åˆ°äº†"Connection refused"çš„é”™è¯¯ï¼Œè€Œå°è¯•ä½¿ç”¨ä¸åŒçš„IPåœ°å€(192.168.232.136)å…‹éš†ä»“åº“æ—¶é‡åˆ°äº†"Connection timed out"çš„é”™è¯¯ã€‚è¿™è¡¨æ˜æœ‰ç½‘ç»œè¿æ¥æˆ–æœåŠ¡é…ç½®æ–¹é¢çš„é—®é¢˜ã€‚è®©æˆ‘æ£€æŸ¥ä¸€äº›å…³é”®çš„é…ç½®ç‚¹ã€‚

æˆ‘éœ€è¦:
1. ç¡®è®¤GitLab SSHæœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œåœ¨2224ç«¯å£
2. æ£€æŸ¥é˜²ç«å¢™æ˜¯å¦é˜»æ­¢äº†SSHè¿æ¥
3. éªŒè¯Dockerå®¹å™¨çš„ç½‘ç»œé…ç½®</think>è®©æˆ‘è¿›ä¸€æ­¥æ£€æŸ¥GitLabå®¹å™¨çš„SSHæœåŠ¡é…ç½®å’Œç½‘ç»œè®¾ç½®ã€‚

---

```bash
sudo netstat -tlnp | grep 2224 | cat
```

```
root@ubuntu2404:~# sudo netstat -tlnp | grep 2224 | cat
tcp        0      0 0.0.0.0:2224            0.0.0.0:*               LISTEN      14236/docker-proxy  
tcp6       0      0 :::2224                 :::*                    LISTEN      14241/docker-proxy  
root@ubuntu2404:~#
```

---

æˆ‘çœ‹åˆ°2224ç«¯å£ç¡®å®åœ¨ç›‘å¬ä¸­ã€‚è®©æˆ‘æ£€æŸ¥GitLabå®¹å™¨çš„æ—¥å¿—ï¼Œçœ‹çœ‹SSHæœåŠ¡æ˜¯å¦æ­£å¸¸å¯åŠ¨ã€‚

---

```bash
docker logs gitlab 2>&1 | grep -i ssh | tail -20 | cat
```

```
root@ubuntu2404:~# docker logs gitlab 2>&1 | grep -i ssh | tail -20 | cat
  * bash[generate gitlab-sshd host keys] action run (skipped due to only_if)
  * file[/var/opt/gitlab/.ssh/authorized_keys] action create_if_missing (up to date)
  * env_dir[/opt/gitlab/etc/gitlab-sshd/env] action nothing (skipped due to action :nothing)
  * service[gitlab-sshd] action nothing (skipped due to action :nothing)
  * runit_service[gitlab-sshd] action disable
    * ruby_block[disable gitlab-sshd] action run (skipped due to only_if)
==> /var/log/gitlab/sshd/current <==
{"severity":"INFO","time":"2025-03-12T04:00:00.722Z","correlation_id":"01JP484R3NDYF9DQ779Q7CSQZC","met
a.caller_id":"graphql:pathLastCommit","meta.feature_category":"groups_and_projects","meta.organization_
id":1,"meta.remote_ip":"192.168.137.1","meta.user":"root","meta.user_id":1,"meta.client_id":"user/1","t
race_type":"execute_query","query_fingerprint":"pathLastCommit/HvJBAd-b2QP-5J_h-0KxfJOhtgu4Ctc_se-QQxBR
i14=/4/ZjwrGgMk0vFK5K5wQH79wRA5rv6LF5XJdhur_S4KqHk=","duration_s":0.07374800999969011,"operation_name":
"pathLastCommit","operation_fingerprint":"pathLastCommit/HvJBAd-b2QP-5J_h-0KxfJOhtgu4Ctc_se-QQxBRi14=",
"is_mutation":false,"variables":"{\"projectPath\"=\u003e\"root/test\", \"ref\"=\u003e\"main\", \"refTyp
e\"=\u003e\"HEADS\", \"path\"=\u003e\"\"}","query_string":"query pathLastCommit($projectPath: ID!, $pat
h: String, $ref: String!, $refType: RefType) {\n  project(fullPath: $projectPath) {\n    __typename\n  
  id\n    repository {\n      __typename\n      paginatedTree(path: $path, ref: $ref, refType: $refType
) {\n        __typename\n        nodes {\n          __typename\n          lastCommit {\n            __t
ypename\n            id\n            sha\n            title\n            titleHtml\n            descrip
tionHtml\n            message\n            webPath\n            authoredDate\n            authorName\n 
           authorGravatar\n            author {\n              __typename\n              id\n          
    name\n              avatarUrl\n              webPath\n            }\n            signature {\n     
         __typename\n              ... on GpgSignature {\n                gpgKeyPrimaryKeyid\n         
       verificationStatus\n                __typename\n              }\n              ... on X509Signat
ure {\n                verificationStatus\n                x509Certificate {\n                  id\n   
               subject\n                  subjectKeyIdentifier\n                  x509Issuer {\n       
             id\n                    subject\n                    subjectKeyIdentifier\n               
     __typename\n                  }\n                  __typename\n                }\n                
__typename\n              }\n              ... on SshSignature {\n                verificationStatus\n 
               keyFingerprintSha256\n                __typename\n              }\n            }\n      
      pipelines(ref: $ref, first: 1) {\n              __typename\n              edges {\n              
  __typename\n                node {\n                  __typename\n                  id\n             
     detailedStatus {\n                    __typename\n                    id\n                    deta
ilsPath\n                    icon\n                    tooltip\n                    text\n             
       group\n                  }\n                }\n              }\n            }\n          }\n    
    }\n      }\n    }\n  }\n}\n","query_analysis.duration_s":0.004038674000184983,"query_analysis.compl
exity":149,"query_analysis.depth":10,"query_analysis.used_fields":["Project.__typename","Project.id","R
epository.__typename","TreeConnection.__typename","Tree.__typename","Commit.__typename","Commit.id","Co
mmit.sha","Commit.title","Commit.titleHtml","Commit.descriptionHtml","Commit.message","Commit.webPath",
"Commit.authoredDate","Commit.authorName","Commit.authorGravatar","UserCore.__typename","UserCore.id","
UserCore.name","UserCore.avatarUrl","UserCore.webPath","Commit.author","CommitSignature.__typename","Gp
gSignature.gpgKeyPrimaryKeyid","GpgSignature.verificationStatus","GpgSignature.__typename","X509Signatu
re.verificationStatus","X509Certificate.id","X509Certificate.subject","X509Certificate.subjectKeyIdenti
fier","X509Issuer.id","X509Issuer.subject","X509Issuer.subjectKeyIdentifier","X509Issuer.__typename","X
509Certificate.x509Issuer","X509Certificate.__typename","X509Signature.x509Certificate","X509Signature.
__typename","SshSignature.verificationStatus","SshSignature.keyFingerprintSha256","SshSignature.__typen
ame","Commit.signature","PipelineConnection.__typename","PipelineEdge.__typename","Pipeline.__typename"
,"Pipeline.id","DetailedStatus.__typename","DetailedStatus.id","DetailedStatus.detailsPath","DetailedSt
atus.icon","DetailedStatus.tooltip","DetailedStatus.text","DetailedStatus.group","Pipeline.detailedStat
us","PipelineEdge.node","PipelineConnection.edges","Commit.pipelines","Tree.lastCommit","TreeConnection
.nodes","Repository.paginatedTree","Project.repository","Query.project"],"query_analysis.used_deprecate
d_fields":["DetailedStatus.icon","DetailedStatus.text","DetailedStatus.group"],"query_analysis.used_dep
recated_arguments":[]}
{"severity":"INFO","time":"2025-03-12T04:03:59.301Z","correlation_id":"01JP48C0QXAR2M92MRH81DJ78X","met
a.caller_id":"graphql:pathLastCommit","meta.feature_category":"groups_and_projects","meta.organization_
id":1,"meta.remote_ip":"192.168.137.1","meta.user":"root","meta.user_id":1,"meta.client_id":"user/1","t
race_type":"execute_query","query_fingerprint":"pathLastCommit/HvJBAd-b2QP-5J_h-0KxfJOhtgu4Ctc_se-QQxBR
i14=/4/ZjwrGgMk0vFK5K5wQH79wRA5rv6LF5XJdhur_S4KqHk=","duration_s":0.21912304000034055,"operation_name":
"pathLastCommit","operation_fingerprint":"pathLastCommit/HvJBAd-b2QP-5J_h-0KxfJOhtgu4Ctc_se-QQxBRi14=",
"is_mutation":false,"variables":"{\"projectPath\"=\u003e\"root/test\", \"ref\"=\u003e\"main\", \"refTyp
e\"=\u003e\"HEADS\", \"path\"=\u003e\"\"}","query_string":"query pathLastCommit($projectPath: ID!, $pat
h: String, $ref: String!, $refType: RefType) {\n  project(fullPath: $projectPath) {\n    __typename\n  
  id\n    repository {\n      __typename\n      paginatedTree(path: $path, ref: $ref, refType: $refType
) {\n        __typename\n        nodes {\n          __typename\n          lastCommit {\n            __t
ypename\n            id\n            sha\n            title\n            titleHtml\n            descrip
tionHtml\n            message\n            webPath\n            authoredDate\n            authorName\n 
           authorGravatar\n            author {\n              __typename\n              id\n          
    name\n              avatarUrl\n              webPath\n            }\n            signature {\n     
         __typename\n              ... on GpgSignature {\n                gpgKeyPrimaryKeyid\n         
       verificationStatus\n                __typename\n              }\n              ... on X509Signat
ure {\n                verificationStatus\n                x509Certificate {\n                  id\n   
               subject\n                  subjectKeyIdentifier\n                  x509Issuer {\n       
             id\n                    subject\n                    subjectKeyIdentifier\n               
     __typename\n                  }\n                  __typename\n                }\n                
__typename\n              }\n              ... on SshSignature {\n                verificationStatus\n 
               keyFingerprintSha256\n                __typename\n              }\n            }\n      
      pipelines(ref: $ref, first: 1) {\n              __typename\n              edges {\n              
  __typename\n                node {\n                  __typename\n                  id\n             
     detailedStatus {\n                    __typename\n                    id\n                    deta
ilsPath\n                    icon\n                    tooltip\n                    text\n             
       group\n                  }\n                }\n              }\n            }\n          }\n    
    }\n      }\n    }\n  }\n}\n","query_analysis.duration_s":0.0018604289998620516,"query_analysis.comp
lexity":149,"query_analysis.depth":10,"query_analysis.used_fields":["Project.__typename","Project.id","
Repository.__typename","TreeConnection.__typename","Tree.__typename","Commit.__typename","Commit.id","C
ommit.sha","Commit.title","Commit.titleHtml","Commit.descriptionHtml","Commit.message","Commit.webPath"
,"Commit.authoredDate","Commit.authorName","Commit.authorGravatar","UserCore.__typename","UserCore.id",
"UserCore.name","UserCore.avatarUrl","UserCore.webPath","Commit.author","CommitSignature.__typename","G
pgSignature.gpgKeyPrimaryKeyid","GpgSignature.verificationStatus","GpgSignature.__typename","X509Signat
ure.verificationStatus","X509Certificate.id","X509Certificate.subject","X509Certificate.subjectKeyIdent
ifier","X509Issuer.id","X509Issuer.subject","X509Issuer.subjectKeyIdentifier","X509Issuer.__typename","
X509Certificate.x509Issuer","X509Certificate.__typename","X509Signature.x509Certificate","X509Signature
.__typename","SshSignature.verificationStatus","SshSignature.keyFingerprintSha256","SshSignature.__type
name","Commit.signature","PipelineConnection.__typename","PipelineEdge.__typename","Pipeline.__typename
","Pipeline.id","DetailedStatus.__typename","DetailedStatus.id","DetailedStatus.detailsPath","DetailedS
tatus.icon","DetailedStatus.tooltip","DetailedStatus.text","DetailedStatus.group","Pipeline.detailedSta
tus","PipelineEdge.node","PipelineConnection.edges","Commit.pipelines","Tree.lastCommit","TreeConnectio
n.nodes","Repository.paginatedTree","Project.repository","Query.project"],"query_analysis.used_deprecat
ed_fields":["DetailedStatus.icon","DetailedStatus.text","DetailedStatus.group"],"query_analysis.used_de
precated_arguments":[]}
{"severity":"INFO","time":"2025-03-12T04:06:35.581Z","message":"Cron Jobs - added job with name: ssh_ke
ys_expired_notification_worker"}
{"severity":"INFO","time":"2025-03-12T04:06:35.583Z","message":"Cron Jobs - added job with name: ssh_ke
ys_expiring_soon_notification_worker"}
{"severity":"INFO","time":"2025-03-12T04:07:10.244Z","correlation_id":"01JP48HV3N5GZ64HBJ4M915MF9","met
a.caller_id":"graphql:pathLastCommit","meta.feature_category":"groups_and_projects","meta.organization_
id":1,"meta.remote_ip":"192.168.137.1","meta.user":"root","meta.user_id":1,"meta.client_id":"user/1","t
race_type":"execute_query","query_fingerprint":"pathLastCommit/HvJBAd-b2QP-5J_h-0KxfJOhtgu4Ctc_se-QQxBR
i14=/4/ZjwrGgMk0vFK5K5wQH79wRA5rv6LF5XJdhur_S4KqHk=","duration_s":0.08760668299964891,"operation_name":
"pathLastCommit","operation_fingerprint":"pathLastCommit/HvJBAd-b2QP-5J_h-0KxfJOhtgu4Ctc_se-QQxBRi14=",
"is_mutation":false,"variables":"{\"projectPath\"=\u003e\"root/test\", \"ref\"=\u003e\"main\", \"refTyp
e\"=\u003e\"HEADS\", \"path\"=\u003e\"\"}","query_string":"query pathLastCommit($projectPath: ID!, $pat
h: String, $ref: String!, $refType: RefType) {\n  project(fullPath: $projectPath) {\n    __typename\n  
  id\n    repository {\n      __typename\n      paginatedTree(path: $path, ref: $ref, refType: $refType
) {\n        __typename\n        nodes {\n          __typename\n          lastCommit {\n            __t
ypename\n            id\n            sha\n            title\n            titleHtml\n            descrip
tionHtml\n            message\n            webPath\n            authoredDate\n            authorName\n 
           authorGravatar\n            author {\n              __typename\n              id\n          
    name\n              avatarUrl\n              webPath\n            }\n            signature {\n     
         __typename\n              ... on GpgSignature {\n                gpgKeyPrimaryKeyid\n         
       verificationStatus\n                __typename\n              }\n              ... on X509Signat
ure {\n                verificationStatus\n                x509Certificate {\n                  id\n   
               subject\n                  subjectKeyIdentifier\n                  x509Issuer {\n       
             id\n                    subject\n                    subjectKeyIdentifier\n               
     __typename\n                  }\n                  __typename\n                }\n                
__typename\n              }\n              ... on SshSignature {\n                verificationStatus\n 
               keyFingerprintSha256\n                __typename\n              }\n            }\n      
      pipelines(ref: $ref, first: 1) {\n              __typename\n              edges {\n              
  __typename\n                node {\n                  __typename\n                  id\n             
     detailedStatus {\n                    __typename\n                    id\n                    deta
ilsPath\n                    icon\n                    tooltip\n                    text\n             
       group\n                  }\n                }\n              }\n            }\n          }\n    
    }\n      }\n    }\n  }\n}\n","query_analysis.duration_s":0.0038553719996343716,"query_analysis.comp
lexity":149,"query_analysis.depth":10,"query_analysis.used_fields":["Project.__typename","Project.id","
Repository.__typename","TreeConnection.__typename","Tree.__typename","Commit.__typename","Commit.id","C
ommit.sha","Commit.title","Commit.titleHtml","Commit.descriptionHtml","Commit.message","Commit.webPath"
,"Commit.authoredDate","Commit.authorName","Commit.authorGravatar","UserCore.__typename","UserCore.id",
"UserCore.name","UserCore.avatarUrl","UserCore.webPath","Commit.author","CommitSignature.__typename","G
pgSignature.gpgKeyPrimaryKeyid","GpgSignature.verificationStatus","GpgSignature.__typename","X509Signat
ure.verificationStatus","X509Certificate.id","X509Certificate.subject","X509Certificate.subjectKeyIdent
ifier","X509Issuer.id","X509Issuer.subject","X509Issuer.subjectKeyIdentifier","X509Issuer.__typename","
X509Certificate.x509Issuer","X509Certificate.__typename","X509Signature.x509Certificate","X509Signature
.__typename","SshSignature.verificationStatus","SshSignature.keyFingerprintSha256","SshSignature.__type
name","Commit.signature","PipelineConnection.__typename","PipelineEdge.__typename","Pipeline.__typename
","Pipeline.id","DetailedStatus.__typename","DetailedStatus.id","DetailedStatus.detailsPath","DetailedS
tatus.icon","DetailedStatus.tooltip","DetailedStatus.text","DetailedStatus.group","Pipeline.detailedSta
tus","PipelineEdge.node","PipelineConnection.edges","Commit.pipelines","Tree.lastCommit","TreeConnectio
n.nodes","Repository.paginatedTree","Project.repository","Query.project"],"query_analysis.used_deprecat
ed_fields":["DetailedStatus.icon","DetailedStatus.text","DetailedStatus.group"],"query_analysis.used_de
precated_arguments":[]}
{"method":"POST","path":"/api/graphql","format":"*/*","controller":"GraphqlController","action":"execut
e","status":200,"time":"2025-03-12T04:07:10.245Z","params":[{"key":"operationName","value":"pathLastCom
mit"},{"key":"variables","value":"[FILTERED]"},{"key":"query","value":"[FILTERED]"},{"key":"graphql","v
alue":{"operationName":"pathLastCommit","variables":"[FILTERED]","query":"[FILTERED]"}}],"correlation_i
d":"01JP48HV3N5GZ64HBJ4M915MF9","meta.caller_id":"GraphqlController#execute","meta.feature_category":"g
roups_and_projects","meta.organization_id":1,"meta.remote_ip":"192.168.137.1","meta.user":"root","meta.
user_id":1,"meta.client_id":"user/1","graphql":[{"complexity":149,"depth":10,"used_fields":["Project.__
typename","Project.id","Repository.__typename","TreeConnection.__typename","Tree.__typename","Commit.__
typename","Commit.id","Commit.sha","Commit.title","Commit.titleHtml","Commit.descriptionHtml","Commit.m
essage","Commit.webPath","Commit.authoredDate","Commit.authorName","Commit.authorGravatar","UserCore.__
typename","UserCore.id","UserCore.name","UserCore.avatarUrl","UserCore.webPath","Commit.author","Commit
Signature.__typename","GpgSignature.gpgKeyPrimaryKeyid","GpgSignature.verificationStatus","GpgSignature
.__typename","X509Signature.verificationStatus","X509Certificate.id","X509Certificate.subject","X509Cer
tificate.subjectKeyIdentifier","X509Issuer.id","X509Issuer.subject","X509Issuer.subjectKeyIdentifier","
X509Issuer.__typename","X509Certificate.x509Issuer","X509Certificate.__typename","X509Signature.x509Cer
tificate","X509Signature.__typename","SshSignature.verificationStatus","SshSignature.keyFingerprintSha2
56","SshSignature.__typename","Commit.signature","PipelineConnection.__typename","PipelineEdge.__typena
me","Pipeline.__typename","Pipeline.id","DetailedStatus.__typename","DetailedStatus.id","DetailedStatus
.detailsPath","DetailedStatus.icon","DetailedStatus.tooltip","DetailedStatus.text","DetailedStatus.grou
p","Pipeline.detailedStatus","PipelineEdge.node","PipelineConnection.edges","Commit.pipelines","Tree.la
stCommit","TreeConnection.nodes","Repository.paginatedTree","Project.repository","Query.project"],"used
_deprecated_fields":["DetailedStatus.icon","DetailedStatus.text","DetailedStatus.group"],"used_deprecat
ed_arguments":[],"variables":"{\"projectPath\"=>\"root/test\", \"ref\"=>\"main\", \"refType\"=>\"HEADS\
", \"path\"=>\"\"}","operation_name":"pathLastCommit"}],"remote_ip":"192.168.137.1","user_id":1,"userna
me":"root","ua":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrom
e/134.0.0.0 Safari/537.36","queue_duration_s":0.028959,"request_urgency":"low","target_duration_s":5,"g
italy_calls":2,"gitaly_duration_s":0.013725,"redis_calls":10,"redis_allowed_cross_slot_calls":1,"redis_
duration_s":0.0037670000000000004,"redis_read_bytes":816,"redis_write_bytes":1076,"redis_cache_calls":1
,"redis_cache_duration_s":0.000154,"redis_cache_read_bytes":35,"redis_cache_write_bytes":131,"redis_db_
load_balancing_calls":2,"redis_db_load_balancing_duration_s":0.002573,"redis_db_load_balancing_write_by
tes":104,"redis_feature_flag_calls":2,"redis_feature_flag_duration_s":0.000326,"redis_feature_flag_read
_bytes":397,"redis_feature_flag_write_bytes":134,"redis_repository_cache_calls":2,"redis_repository_cac
he_duration_s":0.000301,"redis_repository_cache_read_bytes":204,"redis_repository_cache_write_bytes":85
,"redis_sessions_calls":3,"redis_sessions_allowed_cross_slot_calls":1,"redis_sessions_duration_s":0.000
413,"redis_sessions_read_bytes":180,"redis_sessions_write_bytes":622,"db_count":10,"db_write_count":0,"
db_cached_count":0,"db_txn_count":0,"db_replica_txn_count":0,"db_primary_txn_count":0,"db_replica_count
":0,"db_primary_count":10,"db_replica_write_count":0,"db_primary_write_count":0,"db_replica_cached_coun
t":0,"db_primary_cached_count":0,"db_replica_wal_count":0,"db_primary_wal_count":0,"db_replica_wal_cach
ed_count":0,"db_primary_wal_cached_count":0,"db_replica_txn_max_duration_s":0.0,"db_primary_txn_max_dur
ation_s":0.0,"db_replica_txn_duration_s":0.0,"db_primary_txn_duration_s":0.0,"db_replica_duration_s":0.
0,"db_primary_duration_s":0.008,"db_main_txn_count":0,"db_ci_txn_count":0,"db_main_replica_txn_count":0
,"db_ci_replica_txn_count":0,"db_main_count":9,"db_ci_count":1,"db_main_replica_count":0,"db_ci_replica
_count":0,"db_main_write_count":0,"db_ci_write_count":0,"db_main_replica_write_count":0,"db_ci_replica_
write_count":0,"db_main_cached_count":0,"db_ci_cached_count":0,"db_main_replica_cached_count":0,"db_ci_
replica_cached_count":0,"db_main_wal_count":0,"db_ci_wal_count":0,"db_main_replica_wal_count":0,"db_ci_
replica_wal_count":0,"db_main_wal_cached_count":0,"db_ci_wal_cached_count":0,"db_main_replica_wal_cache
d_count":0,"db_ci_replica_wal_cached_count":0,"db_main_txn_max_duration_s":0.0,"db_ci_txn_max_duration_
s":0.0,"db_main_replica_txn_max_duration_s":0.0,"db_ci_replica_txn_max_duration_s":0.0,"db_main_txn_dur
ation_s":0.0,"db_ci_txn_duration_s":0.0,"db_main_replica_txn_duration_s":0.0,"db_ci_replica_txn_duratio
n_s":0.0,"db_main_duration_s":0.006,"db_ci_duration_s":0.001,"db_main_replica_duration_s":0.0,"db_ci_re
plica_duration_s":0.0,"cpu_s":0.515873,"mem_objects":41946,"mem_bytes":4881960,"mem_mallocs":20747,"mem
_total_bytes":6559800,"pid":533,"worker_id":"puma_3","rate_limiting_gates":[],"db_duration_s":0.0203,"v
iew_duration_s":0.00017,"duration_s":0.51817}
{"method":"GET","path":"/-/user_settings/ssh_keys","format":"html","controller":"UserSettings::SshKeysC
ontroller","action":"index","status":200,"time":"2025-03-12T04:07:24.144Z","params":[],"correlation_id"
:"01JP48J86VN12J4DN4HQE6WK6M","meta.caller_id":"UserSettings::SshKeysController#index","meta.feature_ca
tegory":"user_profile","meta.organization_id":1,"meta.remote_ip":"192.168.137.1","meta.user":"root","me
ta.user_id":1,"meta.client_id":"user/1","remote_ip":"192.168.137.1","user_id":1,"username":"root","ua":
"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safa
ri/537.36","queue_duration_s":0.013508,"request_urgency":"low","target_duration_s":5,"redis_calls":21,"
redis_allowed_cross_slot_calls":1,"redis_duration_s":0.38070299999999996,"redis_read_bytes":3966,"redis
_write_bytes":1790,"redis_cache_calls":13,"redis_cache_duration_s":0.379304,"redis_cache_read_bytes":31
89,"redis_cache_write_bytes":871,"redis_db_load_balancing_calls":2,"redis_db_load_balancing_duration_s"
:0.000157,"redis_db_load_balancing_write_bytes":104,"redis_feature_flag_calls":3,"redis_feature_flag_du
ration_s":0.000658,"redis_feature_flag_read_bytes":597,"redis_feature_flag_write_bytes":193,"redis_sess
ions_calls":3,"redis_sessions_allowed_cross_slot_calls":1,"redis_sessions_duration_s":0.000584,"redis_s
essions_read_bytes":180,"redis_sessions_write_bytes":622,"db_count":21,"db_write_count":0,"db_cached_co
unt":6,"db_txn_count":0,"db_replica_txn_count":0,"db_primary_txn_count":0,"db_replica_count":0,"db_prim
ary_count":21,"db_replica_write_count":0,"db_primary_write_count":0,"db_replica_cached_count":0,"db_pri
mary_cached_count":6,"db_replica_wal_count":0,"db_primary_wal_count":0,"db_replica_wal_cached_count":0,
"db_primary_wal_cached_count":0,"db_replica_txn_max_duration_s":0.0,"db_primary_txn_max_duration_s":0.0
,"db_replica_txn_duration_s":0.0,"db_primary_txn_duration_s":0.0,"db_replica_duration_s":0.0,"db_primar
y_duration_s":0.008,"db_main_txn_count":0,"db_ci_txn_count":0,"db_main_replica_txn_count":0,"db_ci_repl
ica_txn_count":0,"db_main_count":21,"db_ci_count":0,"db_main_replica_count":0,"db_ci_replica_count":0,"
db_main_write_count":0,"db_ci_write_count":0,"db_main_replica_write_count":0,"db_ci_replica_write_count
":0,"db_main_cached_count":6,"db_ci_cached_count":0,"db_main_replica_cached_count":0,"db_ci_replica_cac
hed_count":0,"db_main_wal_count":0,"db_ci_wal_count":0,"db_main_replica_wal_count":0,"db_ci_replica_wal
_count":0,"db_main_wal_cached_count":0,"db_ci_wal_cached_count":0,"db_main_replica_wal_cached_count":0,
"db_ci_replica_wal_cached_count":0,"db_main_txn_max_duration_s":0.0,"db_ci_txn_max_duration_s":0.0,"db_
main_replica_txn_max_duration_s":0.0,"db_ci_replica_txn_max_duration_s":0.0,"db_main_txn_duration_s":0.
0,"db_ci_txn_duration_s":0.0,"db_main_replica_txn_duration_s":0.0,"db_ci_replica_txn_duration_s":0.0,"d
b_main_duration_s":0.008,"db_ci_duration_s":0.0,"db_main_replica_duration_s":0.0,"db_ci_replica_duratio
n_s":0.0,"cpu_s":1.018093,"mem_objects":1747609,"mem_bytes":115564568,"mem_mallocs":356604,"mem_total_b
ytes":185468928,"pid":531,"worker_id":"puma_2","rate_limiting_gates":[],"db_duration_s":0.02664,"view_d
uration_s":0.96273,"duration_s":1.02319}
{"backend_id":"rails","content_type":"text/html; charset=utf-8","correlation_id":"01JP48J86VN12J4DN4HQE
6WK6M","duration_ms":1047,"host":"192.168.137.136:8929","level":"info","method":"GET","msg":"access","p
roto":"HTTP/1.1","referrer":"http://192.168.137.136:8929/-/profile/preferences","remote_addr":"127.0.0.
1:0","remote_ip":"127.0.0.1","route":"^/-/","route_id":"dash","status":200,"system":"http","time":"2025
-03-12T04:07:24Z","ttfb_ms":1047,"uri":"/-/user_settings/ssh_keys","user_agent":"Mozilla/5.0 (Windows N
T 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36","written_byt
es":32288}
192.168.137.1 - - [12/Mar/2025:04:07:24 +0000] "GET /-/user_settings/ssh_keys HTTP/1.1" 200 9930 "http:
//192.168.137.136:8929/-/profile/preferences" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/53
7.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36" 3.26
{"backend_id":"rails","content_type":"text/html; charset=utf-8","correlation_id":"01JP48JD8P3ECJX343ESF
RWT85","duration_ms":185,"host":"192.168.137.136:8929","level":"info","method":"GET","msg":"access","pr
oto":"HTTP/1.1","referrer":"http://192.168.137.136:8929/-/user_settings/ssh_keys","remote_addr":"127.0.
0.1:0","remote_ip":"127.0.0.1","route":"^/-/","route_id":"dash","status":200,"system":"http","time":"20
25-03-12T04:07:28Z","ttfb_ms":185,"uri":"/-/user_settings/profile","user_agent":"Mozilla/5.0 (Windows N
T 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36","written_byt
es":54033}
192.168.137.1 - - [12/Mar/2025:04:07:28 +0000] "GET /-/user_settings/profile HTTP/1.1" 200 13423 "http:
//192.168.137.136:8929/-/user_settings/ssh_keys" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit
/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36" 4.03
{"severity":"INFO","time":"2025-03-12T04:07:33.942Z","correlation_id":"01JP48JJNQNFP18Z4JH629K18M","met
a.caller_id":"graphql:pathLastCommit","meta.feature_category":"groups_and_projects","meta.organization_
id":1,"meta.remote_ip":"192.168.137.1","meta.user":"root","meta.user_id":1,"meta.client_id":"user/1","t
race_type":"execute_query","query_fingerprint":"pathLastCommit/HvJBAd-b2QP-5J_h-0KxfJOhtgu4Ctc_se-QQxBR
i14=/4/ZjwrGgMk0vFK5K5wQH79wRA5rv6LF5XJdhur_S4KqHk=","duration_s":0.10016338500008715,"operation_name":
"pathLastCommit","operation_fingerprint":"pathLastCommit/HvJBAd-b2QP-5J_h-0KxfJOhtgu4Ctc_se-QQxBRi14=",
"is_mutation":false,"variables":"{\"projectPath\"=\u003e\"root/test\", \"ref\"=\u003e\"main\", \"refTyp
e\"=\u003e\"HEADS\", \"path\"=\u003e\"\"}","query_string":"query pathLastCommit($projectPath: ID!, $pat
h: String, $ref: String!, $refType: RefType) {\n  project(fullPath: $projectPath) {\n    __typename\n  
  id\n    repository {\n      __typename\n      paginatedTree(path: $path, ref: $ref, refType: $refType
) {\n        __typename\n        nodes {\n          __typename\n          lastCommit {\n            __t
ypename\n            id\n            sha\n            title\n            titleHtml\n            descrip
tionHtml\n            message\n            webPath\n            authoredDate\n            authorName\n 
           authorGravatar\n            author {\n              __typename\n              id\n          
    name\n              avatarUrl\n              webPath\n            }\n            signature {\n     
         __typename\n              ... on GpgSignature {\n                gpgKeyPrimaryKeyid\n         
       verificationStatus\n                __typename\n              }\n              ... on X509Signat
ure {\n                verificationStatus\n                x509Certificate {\n                  id\n   
               subject\n                  subjectKeyIdentifier\n                  x509Issuer {\n       
             id\n                    subject\n                    subjectKeyIdentifier\n               
     __typename\n                  }\n                  __typename\n                }\n                
__typename\n              }\n              ... on SshSignature {\n                verificationStatus\n 
               keyFingerprintSha256\n                __typename\n              }\n            }\n      
      pipelines(ref: $ref, first: 1) {\n              __typename\n              edges {\n              
  __typename\n                node {\n                  __typename\n                  id\n             
     detailedStatus {\n                    __typename\n                    id\n                    deta
ilsPath\n                    icon\n                    tooltip\n                    text\n             
       group\n                  }\n                }\n              }\n            }\n          }\n    
    }\n      }\n    }\n  }\n}\n","query_analysis.duration_s":0.0019251500007158029,"query_analysis.comp
lexity":149,"query_analysis.depth":10,"query_analysis.used_fields":["Project.__typename","Project.id","
Repository.__typename","TreeConnection.__typename","Tree.__typename","Commit.__typename","Commit.id","C
ommit.sha","Commit.title","Commit.titleHtml","Commit.descriptionHtml","Commit.message","Commit.webPath"
,"Commit.authoredDate","Commit.authorName","Commit.authorGravatar","UserCore.__typename","UserCore.id",
"UserCore.name","UserCore.avatarUrl","UserCore.webPath","Commit.author","CommitSignature.__typename","G
pgSignature.gpgKeyPrimaryKeyid","GpgSignature.verificationStatus","GpgSignature.__typename","X509Signat
ure.verificationStatus","X509Certificate.id","X509Certificate.subject","X509Certificate.subjectKeyIdent
ifier","X509Issuer.id","X509Issuer.subject","X509Issuer.subjectKeyIdentifier","X509Issuer.__typename","
X509Certificate.x509Issuer","X509Certificate.__typename","X509Signature.x509Certificate","X509Signature
.__typename","SshSignature.verificationStatus","SshSignature.keyFingerprintSha256","SshSignature.__type
name","Commit.signature","PipelineConnection.__typename","PipelineEdge.__typename","Pipeline.__typename
","Pipeline.id","DetailedStatus.__typename","DetailedStatus.id","DetailedStatus.detailsPath","DetailedS
tatus.icon","DetailedStatus.tooltip","DetailedStatus.text","DetailedStatus.group","Pipeline.detailedSta
tus","PipelineEdge.node","PipelineConnection.edges","Commit.pipelines","Tree.lastCommit","TreeConnectio
n.nodes","Repository.paginatedTree","Project.repository","Query.project"],"query_analysis.used_deprecat
ed_fields":["DetailedStatus.icon","DetailedStatus.text","DetailedStatus.group"],"query_analysis.used_de
precated_arguments":[]}
{"method":"POST","path":"/api/graphql","format":"*/*","controller":"GraphqlController","action":"execut
e","status":200,"time":"2025-03-12T04:07:33.943Z","params":[{"key":"operationName","value":"pathLastCom
mit"},{"key":"variables","value":"[FILTERED]"},{"key":"query","value":"[FILTERED]"},{"key":"graphql","v
alue":{"operationName":"pathLastCommit","variables":"[FILTERED]","query":"[FILTERED]"}}],"correlation_i
d":"01JP48JJNQNFP18Z4JH629K18M","meta.caller_id":"GraphqlController#execute","meta.feature_category":"g
roups_and_projects","meta.organization_id":1,"meta.remote_ip":"192.168.137.1","meta.user":"root","meta.
user_id":1,"meta.client_id":"user/1","graphql":[{"complexity":149,"depth":10,"used_fields":["Project.__
typename","Project.id","Repository.__typename","TreeConnection.__typename","Tree.__typename","Commit.__
typename","Commit.id","Commit.sha","Commit.title","Commit.titleHtml","Commit.descriptionHtml","Commit.m
essage","Commit.webPath","Commit.authoredDate","Commit.authorName","Commit.authorGravatar","UserCore.__
typename","UserCore.id","UserCore.name","UserCore.avatarUrl","UserCore.webPath","Commit.author","Commit
Signature.__typename","GpgSignature.gpgKeyPrimaryKeyid","GpgSignature.verificationStatus","GpgSignature
.__typename","X509Signature.verificationStatus","X509Certificate.id","X509Certificate.subject","X509Cer
tificate.subjectKeyIdentifier","X509Issuer.id","X509Issuer.subject","X509Issuer.subjectKeyIdentifier","
X509Issuer.__typename","X509Certificate.x509Issuer","X509Certificate.__typename","X509Signature.x509Cer
tificate","X509Signature.__typename","SshSignature.verificationStatus","SshSignature.keyFingerprintSha2
56","SshSignature.__typename","Commit.signature","PipelineConnection.__typename","PipelineEdge.__typena
me","Pipeline.__typename","Pipeline.id","DetailedStatus.__typename","DetailedStatus.id","DetailedStatus
.detailsPath","DetailedStatus.icon","DetailedStatus.tooltip","DetailedStatus.text","DetailedStatus.grou
p","Pipeline.detailedStatus","PipelineEdge.node","PipelineConnection.edges","Commit.pipelines","Tree.la
stCommit","TreeConnection.nodes","Repository.paginatedTree","Project.repository","Query.project"],"used
_deprecated_fields":["DetailedStatus.icon","DetailedStatus.text","DetailedStatus.group"],"used_deprecat
ed_arguments":[],"variables":"{\"projectPath\"=>\"root/test\", \"ref\"=>\"main\", \"refType\"=>\"HEADS\
", \"path\"=>\"\"}","operation_name":"pathLastCommit"}],"remote_ip":"192.168.137.1","user_id":1,"userna
me":"root","ua":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrom
e/134.0.0.0 Safari/537.36","queue_duration_s":0.011099,"request_urgency":"low","target_duration_s":5,"g
italy_calls":2,"gitaly_duration_s":0.014814,"redis_calls":8,"redis_allowed_cross_slot_calls":1,"redis_d
uration_s":0.009876,"redis_read_bytes":419,"redis_write_bytes":942,"redis_cache_calls":1,"redis_cache_d
uration_s":0.004715,"redis_cache_read_bytes":35,"redis_cache_write_bytes":131,"redis_db_load_balancing_
calls":2,"redis_db_load_balancing_duration_s":0.00291,"redis_db_load_balancing_write_bytes":104,"redis_
repository_cache_calls":2,"redis_repository_cache_duration_s":0.000431,"redis_repository_cache_read_byt
es":204,"redis_repository_cache_write_bytes":85,"redis_sessions_calls":3,"redis_sessions_allowed_cross_
slot_calls":1,"redis_sessions_duration_s":0.00182,"redis_sessions_read_bytes":180,"redis_sessions_write
_bytes":622,"db_count":10,"db_write_count":0,"db_cached_count":0,"db_txn_count":0,"db_replica_txn_count
":0,"db_primary_txn_count":0,"db_replica_count":0,"db_primary_count":10,"db_replica_write_count":0,"db_
primary_write_count":0,"db_replica_cached_count":0,"db_primary_cached_count":0,"db_replica_wal_count":0
,"db_primary_wal_count":0,"db_replica_wal_cached_count":0,"db_primary_wal_cached_count":0,"db_replica_t
xn_max_duration_s":0.0,"db_primary_txn_max_duration_s":0.0,"db_replica_txn_duration_s":0.0,"db_primary_
txn_duration_s":0.0,"db_replica_duration_s":0.0,"db_primary_duration_s":0.022,"db_main_txn_count":0,"db
_ci_txn_count":0,"db_main_replica_txn_count":0,"db_ci_replica_txn_count":0,"db_main_count":9,"db_ci_cou
nt":1,"db_main_replica_count":0,"db_ci_replica_count":0,"db_main_write_count":0,"db_ci_write_count":0,"
db_main_replica_write_count":0,"db_ci_replica_write_count":0,"db_main_cached_count":0,"db_ci_cached_cou
nt":0,"db_main_replica_cached_count":0,"db_ci_replica_cached_count":0,"db_main_wal_count":0,"db_ci_wal_
count":0,"db_main_replica_wal_count":0,"db_ci_replica_wal_count":0,"db_main_wal_cached_count":0,"db_ci_
wal_cached_count":0,"db_main_replica_wal_cached_count":0,"db_ci_replica_wal_cached_count":0,"db_main_tx
n_max_duration_s":0.0,"db_ci_txn_max_duration_s":0.0,"db_main_replica_txn_max_duration_s":0.0,"db_ci_re
plica_txn_max_duration_s":0.0,"db_main_txn_duration_s":0.0,"db_ci_txn_duration_s":0.0,"db_main_replica_
txn_duration_s":0.0,"db_ci_replica_txn_duration_s":0.0,"db_main_duration_s":0.02,"db_ci_duration_s":0.0
02,"db_main_replica_duration_s":0.0,"db_ci_replica_duration_s":0.0,"cpu_s":0.065894,"mem_objects":34168
,"mem_bytes":2582240,"mem_mallocs":10606,"mem_total_bytes":3948960,"pid":529,"worker_id":"puma_1","rate
_limiting_gates":[],"db_duration_s":0.03329,"view_duration_s":0.00023,"duration_s":0.10832}
root@ubuntu2404:~#
```

---

è®©æˆ‘æ£€æŸ¥ä¸€ä¸‹GitLabå®¹å™¨ä¸­çš„SSHæœåŠ¡é…ç½®ã€‚

---

```bash
docker exec -it gitlab bash -c "grep -r 'ssh' /etc/gitlab/gitlab.rb | grep -v '#'" | cat
```

```
<b bash -c "grep -r 'ssh' /etc/gitlab/gitlab.rb | grep -v '#'" | cat
gitlab_rails['gitlab_shell_ssh_port'] = 2224
root@ubuntu2404:~#
```

---

è®©æˆ‘æ£€æŸ¥ä¸€ä¸‹åœ¨GitLabå®¹å™¨ä¸­å®é™…ç›‘å¬çš„ç«¯å£ã€‚

---

```bash
docker exec -it gitlab bash -c "netstat -tlnp" | cat
```

```
root@ubuntu2404:~# docker exec -it gitlab bash -c "netstat -tlnp" | cat
netstat: invalid option -- 'p'
BusyBox v1.30.1 (Ubuntu 1:1.30.1-7ubuntu3.1) multi-call binary.

Usage: netstat [-ral] [-tuwx] [-en]

Display networking information

        -r      Routing table
        -a      All sockets
        -l      Listening sockets
                Else: connected sockets
        -t      TCP sockets
        -u      UDP sockets
        -w      Raw sockets
        -x      Unix sockets
                Else: all socket types
        -e      Other/more information
        -n      Don't resolve names
root@ubuntu2404:~#
```

---

è®©æˆ‘ä½¿ç”¨é€‚åˆçš„å‘½ä»¤æ£€æŸ¥GitLabå®¹å™¨å†…éƒ¨çš„ç½‘ç»œã€‚

---

```bash
docker exec -it gitlab bash -c "netstat -tln" | cat
```

```
root@ubuntu2404:~# docker exec -it gitlab bash -c "netstat -tln" | cat
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       
tcp        0      0 127.0.0.1:9236          0.0.0.0:*               LISTEN      
tcp        0      0 127.0.0.1:9229          0.0.0.0:*               LISTEN      
tcp        0      0 127.0.0.1:9168          0.0.0.0:*               LISTEN      
tcp        0      0 127.0.0.1:9187          0.0.0.0:*               LISTEN      
tcp        0      0 127.0.0.1:9090          0.0.0.0:*               LISTEN      
tcp        0      0 127.0.0.1:9093          0.0.0.0:*               LISTEN      
tcp        0      0 127.0.0.1:9121          0.0.0.0:*               LISTEN      
tcp        0      0 0.0.0.0:8060            0.0.0.0:*               LISTEN      
tcp        0      0 127.0.0.11:36165        0.0.0.0:*               LISTEN      
tcp        0      0 0.0.0.0:8929            0.0.0.0:*               LISTEN      
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      
tcp        0      0 127.0.0.1:8151          0.0.0.0:*               LISTEN      
tcp        0      0 127.0.0.1:8150          0.0.0.0:*               LISTEN      
tcp        0      0 127.0.0.1:8153          0.0.0.0:*               LISTEN      
tcp        0      0 127.0.0.1:8155          0.0.0.0:*               LISTEN      
tcp        0      0 127.0.0.1:8154          0.0.0.0:*               LISTEN      
tcp        0      0 127.0.0.1:8080          0.0.0.0:*               LISTEN      
tcp        0      0 127.0.0.1:8082          0.0.0.0:*               LISTEN      
tcp        0      0 127.0.0.1:8092          0.0.0.0:*               LISTEN      
tcp        0      0 ::1:9168                :::*                    LISTEN      
tcp        0      0 :::9094                 :::*                    LISTEN      
tcp        0      0 :::22                   :::*                    LISTEN      
tcp        0      0 :::43633                :::*                    LISTEN      
root@ubuntu2404:~#
```

---

è®©æˆ‘çœ‹çœ‹GitLabçš„SSHé…ç½®æ˜¯å¦ç”Ÿæ•ˆã€‚

---

```bash
docker exec -it gitlab bash -c "cat /var/opt/gitlab/gitlab-shell/config.yml | grep -A3 'ssh_port'" | cat
```

```
<var/opt/gitlab/gitlab-shell/config.yml | grep -A3 'ssh_port'" | cat
root@ubuntu2404:~#
```

---

è®©æˆ‘å°è¯•æŸ¥çœ‹GitLab Shellçš„é…ç½®æ–‡ä»¶ã€‚

---

```bash
docker exec -it gitlab bash -c "cat /var/opt/gitlab/gitlab-shell/config.yml | grep -A20 'gitlab_url'" | cat
```

```
</opt/gitlab/gitlab-shell/config.yml | grep -A20 'gitlab_url'" | cat
gitlab_url: "http+unix://%2Fvar%2Fopt%2Fgitlab%2Fgitlab-workhorse%2Fsockets%2Fsocket"

gitlab_relative_url_root: 

# File that contains the secret key for verifying access to GitLab.
# Default is .gitlab_shell_secret in the gitlab-shell directory.
secret_file: "/var/opt/gitlab/gitlab-rails/etc/gitlab_shell_secret"

http_settings:
  
#  user: someone
#  password: somepass
#  ca_file: /etc/ssl/cert.pem
#  ca_path: /etc/pki/tls/certs

# File used as authorized_keys for gitlab user
auth_file: "/var/opt/gitlab/.ssh/authorized_keys"

# SSL certificate dir where custom certificates can be placed
# https://golang.org/pkg/crypto/x509/
ssl_cert_dir: "/opt/gitlab/embedded/ssl/certs/"
root@ubuntu2404:~#
```

---

è®©æˆ‘æ£€æŸ¥ä¸€ä¸‹GitLabçš„è¿è¡ŒçŠ¶æ€ã€‚

---

```bash
docker exec -it gitlab bash -c "gitlab-ctl status | grep ssh" | cat
```

```
root@ubuntu2404:~# docker exec -it gitlab bash -c "gitlab-ctl status | grep ssh" | cat
run: sshd: (pid 36) 270s; run: log: (pid 35) 270s
root@ubuntu2404:~#
```

---

è®©æˆ‘æ£€æŸ¥GitLabå®¹å™¨çš„ç½‘ç»œå‘å¸ƒæƒ…å†µã€‚

---

```bash
docker port gitlab | cat
```

```
root@ubuntu2404:~# docker port gitlab | cat
2224/tcp -> 0.0.0.0:2224
2224/tcp -> [::]:2224
8929/tcp -> 0.0.0.0:8929
8929/tcp -> [::]:8929
root@ubuntu2404:~#
```

---

æ ¹æ®æˆ‘çš„åˆ†æï¼Œæˆ‘å‘ç°äº†é—®é¢˜æ‰€åœ¨ã€‚ç°åœ¨æˆ‘å°†æä¾›è§£å†³æ–¹æ¡ˆã€‚

## é—®é¢˜åˆ†æ

æˆ‘å‘ç°å‡ ä¸ªå…³é”®é—®é¢˜ï¼š

1. **SSHç«¯å£æ˜ å°„ä¸æ­£ç¡®**ï¼šä»å®¹å™¨å†…éƒ¨æŸ¥çœ‹ï¼ŒGitLabçš„SSHæœåŠ¡åœ¨å®¹å™¨å†…ç›‘å¬çš„æ˜¯æ ‡å‡†SSHç«¯å£22ï¼Œè€Œä¸æ˜¯2224ã€‚ä½†åœ¨Dockerçš„ç«¯å£æ˜ å°„ä¸­ï¼Œä¸»æœºçš„2224ç«¯å£è¢«æ˜ å°„åˆ°äº†å®¹å™¨çš„2224ç«¯å£ï¼ˆå¹¶éå®¹å™¨ä¸­å®é™…ç›‘å¬SSHçš„22ç«¯å£ï¼‰ã€‚

2. **GitLabé…ç½®å’Œå®é™…ç›‘å¬ä¸ä¸€è‡´**ï¼šå°½ç®¡åœ¨`gitlab.rb`ä¸­è®¾ç½®äº†`gitlab_rails['gitlab_shell_ssh_port'] = 2224`ï¼Œä½†è¿™ä¸ªè®¾ç½®å¹¶æœªä½¿GitLabçš„SSHæœåŠ¡åœ¨å®¹å™¨å†…ç›‘å¬2224ç«¯å£ï¼Œè€Œæ˜¯ä»…å½±å“äº†ç”Ÿæˆçš„SSH URLã€‚

## è§£å†³æ–¹æ¡ˆ

æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š

### æ–¹æ³•ä¸€ï¼šä¿®æ”¹ç«¯å£æ˜ å°„

éœ€è¦ä¿®æ”¹`docker-compose.yml`æ–‡ä»¶ï¼Œå°†ä¸»æœºçš„2224ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„22ç«¯å£ï¼š

---

```diff
      ports:  # æ˜ å°„ç«¯å£
        - '8929:8929'  # å°†ä¸»æœºçš„ 8929 ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„ 8929 ç«¯å£
-       - '2224:2224'  # å°†ä¸»æœºçš„ 2224 ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„ 2224 ç«¯å£
+       - '2224:22'  # å°†ä¸»æœºçš„ 2224 ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„ 22 ç«¯å£
      volumes:  # æŒä¹…åŒ–æ•°æ®çš„å·
        - './config:/etc/gitlab'  # å°†ä¸»æœºçš„ ./config ç›®å½•æŒ‚è½½åˆ°å®¹å™¨çš„ /etc/gitlab ç›®å½•
```

---

ç°åœ¨é‡å¯GitLabå®¹å™¨ä»¥åº”ç”¨æ›´æ”¹ï¼š

---

```bash
cd /root/gitlab && docker-compose down && docker-compose up -d
```

```
root@ubuntu2404:~# cd /root/gitlab && docker-compose down && docker-compose up -d
Stopping gitlab ... done
Removing gitlab ... done
Removing network gitlab_default
Creating network "gitlab_default" with the default driver
Creating gitlab ... done
root@ubuntu2404:~/gitlab#
```

---

è®©æˆ‘éªŒè¯ç«¯å£æ˜ å°„æ˜¯å¦å·²ç»æ›´æ–°ï¼š

---

```bash
cd /root/gitlab && docker-compose ps
```

```
root@ubuntu2404:~/gitlab# cd /root/gitlab && docker-compose ps
 Name        Command          State                                   Ports                            
-------------------------------------------------------------------------------------------------------
gitlab   /assets/wrapper   Up (healthy)   0.0.0.0:2224->22/tcp,:::2224->22/tcp, 443/tcp, 80/tcp,       
                                          0.0.0.0:8929->8929/tcp,:::8929->8929/tcp                     
root@ubuntu2404:~/gitlab#
```

---

ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»è§£å†³äº†GitLab SSHè¿æ¥çš„é—®é¢˜ã€‚è®©æˆ‘è§£é‡Šä¸€ä¸‹è§£å†³æ–¹æ¡ˆï¼š

## è§£å†³æ–¹æ¡ˆè§£é‡Š

æˆ‘ä»¬å‘ç°çš„ä¸»è¦é—®é¢˜æ˜¯ç«¯å£æ˜ å°„ä¸æ­£ç¡®ã€‚GitLabå®¹å™¨å†…éƒ¨çš„SSHæœåŠ¡åœ¨æ ‡å‡†çš„22ç«¯å£ä¸Šè¿è¡Œï¼Œä½†æˆ‘ä»¬ä¹‹å‰å°†ä¸»æœºçš„2224ç«¯å£æ˜ å°„åˆ°äº†å®¹å™¨çš„2224ç«¯å£ï¼Œè€Œå®¹å™¨å¹¶æ²¡æœ‰åœ¨2224ç«¯å£ä¸Šç›‘å¬ä»»ä½•æœåŠ¡ã€‚

æˆ‘å·²ç»ä¿®æ”¹äº†`docker-compose.yml`æ–‡ä»¶ï¼Œå°†æ˜ å°„æ”¹ä¸º`'2224:22'`ï¼Œè¿™æ ·å°±æ­£ç¡®åœ°å°†ä¸»æœºçš„2224ç«¯å£æ˜ å°„åˆ°äº†å®¹å™¨å†…SSHæœåŠ¡çš„22ç«¯å£ã€‚é‡å¯å®¹å™¨åï¼Œæ–°çš„ç«¯å£æ˜ å°„å·²ç»ç”Ÿæ•ˆã€‚

## å®¢æˆ·ç«¯æ“ä½œæŒ‡å—

ç°åœ¨æ‚¨åº”è¯¥å¯ä»¥æ­£å¸¸åœ°ä½¿ç”¨SSHåè®®è¿æ¥åˆ°GitLabå¹¶å…‹éš†ä»“åº“äº†ã€‚è¯·åœ¨Windowså®¢æˆ·ç«¯ä¸Šå°è¯•ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

1. **æµ‹è¯•SSHè¿æ¥**ï¼š
   ```
   ssh -T -p 2224 git@192.168.137.136
   ```
   æ‚¨å¯èƒ½ä¼šæ”¶åˆ°ç±»ä¼¼"Welcome to GitLab, @username!"çš„æ¶ˆæ¯ã€‚

2. **å…‹éš†ä»“åº“**ï¼š
   ```
   git clone ssh://git@192.168.137.136:2224/root/test.git
   ```

## å…¶ä»–å¯èƒ½çš„é—®é¢˜æ’æŸ¥

å¦‚æœä»ç„¶é‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š

1. **Windowsé˜²ç«å¢™è®¾ç½®**ï¼šç¡®ä¿Windowsé˜²ç«å¢™æ²¡æœ‰é˜»æ­¢SSHè¿æ¥ã€‚

2. **ç½‘ç»œè¿é€šæ€§**ï¼šç¡®ä¿Windowsèƒ½å¤Ÿpingé€š192.168.137.136ã€‚

3. **SSHå¯†é’¥é…ç½®**ï¼š
   - ç¡®ä¿æ‚¨å·²ç»åœ¨GitLabçš„ç”¨æˆ·è®¾ç½®ä¸­æ·»åŠ äº†æ‚¨çš„SSHå…¬é’¥
   - ç¡®ä¿æ‚¨çš„Windowsä¸Šçš„SSHä»£ç†æ­£åœ¨è¿è¡Œ

ç°åœ¨ä¸€åˆ‡éƒ½åº”è¯¥æ­£å¸¸å·¥ä½œäº†ã€‚å®¹å™¨é‡å¯åéœ€è¦å‡ åˆ†é’Ÿæ—¶é—´æ‰èƒ½å®Œå…¨å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚

---

_**User**_

åˆå‡ºç°äº†é—®é¢˜ï¼Œæ€ä¹ˆè§£å†³ï¼Ÿ  JackietBao@DESKTOP-MI4GTKO MINGW64 /d/æ¡Œé¢
$ git clone ssh://git@192.168.232.136:2224/root/test.git
Cloning into 'test'...
ssh: connect to host 192.168.232.136 port 2224: Connection timed out
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.

JackietBao@DESKTOP-MI4GTKO MINGW64 /d/æ¡Œé¢
$ ssh -T -p 2224 git@192.168.137.136
The authenticity of host '[192.168.137.136]:2224 ([192.168.137.136]:2224)' can't be established.
ED25519 key fingerprint is SHA256:MmxXKWVRKlZsAMqRps1Zde5rpmrWtPqY/fSb7p5TWIk.
This key is not known by any other names.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added '[192.168.137.136]:2224' (ED25519) to the list of known hosts.
git@192.168.137.136: Permission denied (publickey).

JackietBao@DESKTOP-MI4GTKO MINGW64 /d/æ¡Œé¢
$


---

_**Assistant**_

<think>æˆ‘éœ€è¦åˆ†æè¿™ä¸ªæ–°é—®é¢˜ã€‚ä»ç”¨æˆ·æä¾›çš„è¾“å‡ºå¯ä»¥çœ‹åˆ°ä¸¤ä¸ªå…³é”®é—®é¢˜ï¼š

1. å½“å°è¯•å…‹éš† `ssh://git@192.168.232.136:2224/root/test.git` æ—¶å‡ºç° "Connection timed out"ã€‚
2. å½“å°è¯• SSH è¿æ¥åˆ° `192.168.137.136:2224` æ—¶å¯ä»¥è¿æ¥ï¼Œä½†å‡ºç° "Permission denied (publickey)"ã€‚

è¿™è¡¨æ˜ï¼š
- ç”¨æˆ·ä»ç„¶åœ¨ä½¿ç”¨é”™è¯¯çš„ IP åœ°å€ (192.168.232.136) è¿›è¡Œå…‹éš†
- ç”¨æˆ·æˆåŠŸè¿æ¥åˆ°æ­£ç¡®çš„åœ°å€ (192.168.137.136)ï¼Œä½† SSH è®¤è¯å¤±è´¥äº†

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé—®é¢˜æ˜¯ SSH å¯†é’¥è®¤è¯é—®é¢˜ã€‚ç”¨æˆ·éœ€è¦ï¼š
1. å§‹ç»ˆä½¿ç”¨æ­£ç¡®çš„ IP åœ°å€ 192.168.137.136
2. é…ç½®æ­£ç¡®çš„ SSH å¯†é’¥åˆ° GitLab ä¸Š

è®©æˆ‘æä¾›è§£å†³æ–¹æ¡ˆï¼š</think>## æ–°é—®é¢˜åˆ†æ

æ ¹æ®æ‚¨æä¾›çš„ä¿¡æ¯ï¼Œæˆ‘çœ‹åˆ°ä¸¤ä¸ªä¸åŒçš„é—®é¢˜ï¼š

1. **IPåœ°å€é”™è¯¯**: æ‚¨ä»ç„¶åœ¨å°è¯•è¿æ¥åˆ° `192.168.232.136`ï¼Œè€Œæ­£ç¡®çš„ IP åœ°å€åº”è¯¥æ˜¯ `192.168.137.136`ã€‚

2. **SSH å¯†é’¥è®¤è¯å¤±è´¥**: å½“è¿æ¥åˆ°æ­£ç¡®çš„ IP åœ°å€ `192.168.137.136` æ—¶ï¼Œæ‚¨æ”¶åˆ°äº† `Permission denied (publickey)` é”™è¯¯ï¼Œè¿™è¡¨æ˜ SSH å¯†é’¥è®¤è¯å¤±è´¥ã€‚

## è§£å†³æ–¹æ¡ˆ

### 1. é¦–å…ˆè§£å†³ SSH å¯†é’¥è®¤è¯é—®é¢˜ï¼š

æ‚¨éœ€è¦åœ¨ GitLab ä¸­æ·»åŠ æ‚¨çš„ SSH å…¬é’¥ï¼š

1. **ç”Ÿæˆ SSH å¯†é’¥å¯¹**ï¼ˆå¦‚æœæ‚¨è¿˜æ²¡æœ‰ï¼‰ï¼š
   ```
   ssh-keygen -t ed25519 -C "æ‚¨çš„é‚®ç®±åœ°å€"
   ```

2. **å¤åˆ¶æ‚¨çš„å…¬é’¥**ï¼š
   ```
   cat ~/.ssh/id_ed25519.pub
   ```
   æˆ–åœ¨ Windows ä¸­ï¼š
   ```
   type C:\Users\æ‚¨çš„ç”¨æˆ·å\.ssh\id_ed25519.pub
   ```

3. **åœ¨ GitLab ä¸­æ·»åŠ å…¬é’¥**ï¼š
   - ç™»å½•åˆ° GitLab Web ç•Œé¢ (http://192.168.137.136:8929)
   - ç‚¹å‡»å³ä¸Šè§’æ‚¨çš„å¤´åƒ -> åå¥½è®¾ç½®
   - åœ¨å·¦ä¾§èœå•ä¸­é€‰æ‹© "SSH å¯†é’¥"
   - ç²˜è´´æ‚¨çš„å…¬é’¥åˆ°æ–‡æœ¬æ¡†ä¸­
   - ç‚¹å‡» "æ·»åŠ å¯†é’¥"

### 2. ä½¿ç”¨æ­£ç¡®çš„ IP åœ°å€ï¼š

ä¿®æ”¹æ‚¨çš„å…‹éš†å‘½ä»¤ï¼Œä½¿ç”¨æ­£ç¡®çš„ IP åœ°å€ï¼š

```
git clone ssh://git@192.168.137.136:2224/root/test.git
```

### 3. æµ‹è¯• SSH è¿æ¥ï¼š

é…ç½®å¥½ SSH å¯†é’¥åï¼Œå†æ¬¡æµ‹è¯•è¿æ¥ï¼š

```
ssh -T -p 2224 git@192.168.137.136
```

å¦‚æœé…ç½®æ­£ç¡®ï¼Œæ‚¨åº”è¯¥ä¼šæ”¶åˆ°ç±»ä¼¼ "Welcome to GitLab, @ç”¨æˆ·å!" çš„æ¬¢è¿æ¶ˆæ¯ã€‚

### 4. æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼š

ç¡®ä¿æ‚¨çš„ Windows ç”µè„‘å’ŒæœåŠ¡å™¨ä¹‹é—´çš„ç½‘ç»œè¿æ¥æ­£å¸¸ï¼š

```
ping 192.168.137.136
```

## å¯èƒ½çš„é¢å¤–é—®é¢˜

å¦‚æœæ·»åŠ  SSH å¯†é’¥åä»ç„¶æ— æ³•è¿æ¥ï¼Œå¯èƒ½éœ€è¦æŸ¥çœ‹ GitLab å®¹å™¨ä¸­çš„ SSH æ—¥å¿—ï¼š

```
docker exec -it gitlab bash -c "tail -50 /var/log/gitlab/sshd/current"
```

å¦‚æœæœ‰å¿…è¦ï¼Œæ‚¨ä¹Ÿå¯ä»¥å°è¯•ä½¿ç”¨ HTTPS åè®®æ¥å…‹éš†ä»“åº“ï¼Œè¿™æ ·å¯ä»¥é¿å¼€ SSH è®¤è¯é—®é¢˜ï¼š

```
git clone http://192.168.137.136:8929/root/test.git
```

ä½¿ç”¨ HTTPS å…‹éš†æ—¶ï¼Œç³»ç»Ÿä¼šè¦æ±‚æ‚¨è¾“å…¥ GitLab çš„ç”¨æˆ·åå’Œå¯†ç ã€‚

---

_**User**_

ç°åœ¨åˆæŠ¥é”™äº†ï¼Œæ€ä¹ˆè§£å†³ï¼ŸJackietBao@DESKTOP-MI4GTKO MINGW64 /d/æ¡Œé¢
$ ssh -T -p 2224 git@192.168.137.136
git@192.168.137.136: Permission denied (publickey).

JackietBao@DESKTOP-MI4GTKO MINGW64 /d/æ¡Œé¢
$ git clone ssh://git@192.168.137.136:2224/root/test.git
Cloning into 'test'...
git@192.168.137.136: Permission denied (publickey).
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.

JackietBao@DESKTOP-MI4GTKO MINGW64 /d/æ¡Œé¢
$


---

_**Assistant**_

<think>è¿™ä¸ªé”™è¯¯å¾ˆæ˜ç¡®æ˜¯ SSH å¯†é’¥è®¤è¯å¤±è´¥çš„é—®é¢˜ï¼š"Permission denied (publickey)"ã€‚ç”¨æˆ·å°è¯•ä½¿ç”¨ SSH è¿æ¥åˆ° GitLab æœåŠ¡å™¨ï¼Œä½†æœåŠ¡å™¨æ‹’ç»äº†è¿æ¥ï¼Œå› ä¸ºæ— æ³•éªŒè¯ç”¨æˆ·çš„ SSH å¯†é’¥ã€‚

æˆ‘éœ€è¦æ£€æŸ¥å‡ ä¸ªæ–¹é¢æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š

1. ç¡®è®¤ç”¨æˆ·æ˜¯å¦å·²ç»åœ¨ GitLab ä¸­æ·»åŠ äº† SSH å…¬é’¥
2. æ£€æŸ¥ GitLab ä¸­çš„ SSH è®¾ç½®å’Œæ—¥å¿—
3. ç¡®è®¤æœ¬åœ° SSH é…ç½®æ˜¯å¦æ­£ç¡®

è®©æˆ‘ä»¬å…ˆæŸ¥çœ‹ GitLab çš„ SSH ç›¸å…³æ—¥å¿—ã€‚</think># SSH å¯†é’¥è®¤è¯å¤±è´¥é—®é¢˜è§£å†³æ–¹æ¡ˆ

æ‚¨ç°åœ¨é‡åˆ°çš„æ˜¯å…¸å‹çš„ SSH å¯†é’¥è®¤è¯å¤±è´¥é—®é¢˜ï¼ˆ`Permission denied (publickey)`ï¼‰ã€‚è¿™è¡¨æ˜ GitLab æ— æ³•éªŒè¯æ‚¨çš„ SSH å…¬é’¥ã€‚

## è§£å†³æ­¥éª¤

### 1. ç¡®è®¤æ‚¨çš„ SSH å¯†é’¥è®¾ç½®

é¦–å…ˆæ£€æŸ¥æ‚¨æœ¬åœ°æ˜¯å¦æœ‰å¯ç”¨çš„ SSH å¯†é’¥ï¼š

```
ls -la ~/.ssh
```

åœ¨ Windows ä¸Šï¼Œæ‚¨å¯ä»¥åœ¨ Git Bash ä¸­è¿è¡Œï¼š

```
ls -la C:/Users/æ‚¨çš„ç”¨æˆ·å/.ssh
```

### 2. ç”Ÿæˆæ–°çš„ SSH å¯†é’¥ï¼ˆå¦‚æœéœ€è¦ï¼‰

å¦‚æœæ²¡æœ‰æ‰¾åˆ°å¯†é’¥æ–‡ä»¶ï¼ˆé€šå¸¸å‘½åä¸º `id_rsa`ã€`id_ed25519` æˆ–ç±»ä¼¼åç§°ï¼‰ï¼Œè¯·ç”Ÿæˆä¸€ä¸ªæ–°çš„å¯†é’¥ï¼š

```
ssh-keygen -t ed25519 -C "æ‚¨çš„é‚®ç®±åœ°å€"
```

æŒ‰ç…§æç¤ºå®Œæˆå¯†é’¥ç”Ÿæˆè¿‡ç¨‹ã€‚

### 3. æŸ¥çœ‹å¹¶å¤åˆ¶æ‚¨çš„å…¬é’¥

```
cat ~/.ssh/id_ed25519.pub
```

æˆ–åœ¨ Windows ä¸Šï¼š

```
type C:\Users\æ‚¨çš„ç”¨æˆ·å\.ssh\id_ed25519.pub
```

å¤åˆ¶è¾“å‡ºçš„å…¨éƒ¨å†…å®¹ï¼ˆä»¥ `ssh-ed25519` å¼€å¤´ï¼Œä»¥æ‚¨çš„é‚®ç®±åœ°å€ç»“å°¾ï¼‰ã€‚

### 4. å°†å…¬é’¥æ·»åŠ åˆ° GitLab

1. åœ¨æµè§ˆå™¨ä¸­è®¿é—®æ‚¨çš„ GitLab å®ä¾‹ï¼šhttp://192.168.137.136:8929
2. ç™»å½•ï¼ˆå¦‚æœéœ€è¦ï¼‰
3. ç‚¹å‡»å³ä¸Šè§’çš„å¤´åƒ â†’ é€‰æ‹© "åå¥½è®¾ç½®"
4. åœ¨å·¦ä¾§èœå•ä¸­æ‰¾åˆ°å¹¶ç‚¹å‡» "SSH å¯†é’¥"
5. åœ¨ "å¯†é’¥" æ–‡æœ¬æ¡†ä¸­ç²˜è´´æ‚¨åˆšæ‰å¤åˆ¶çš„å…¬é’¥
6. ç‚¹å‡» "æ·»åŠ å¯†é’¥" æŒ‰é’®

### 5. éªŒè¯ SSH å®¢æˆ·ç«¯é…ç½®

ç¡®ä¿æ‚¨çš„ SSH å®¢æˆ·ç«¯æ­£ç¡®é…ç½®ï¼š

1. åˆ›å»ºæˆ–ç¼–è¾‘ `~/.ssh/config` æ–‡ä»¶ï¼š

```
Host gitlab
  HostName 192.168.137.136
  User git
  Port 2224
  IdentityFile ~/.ssh/id_ed25519
```

### 6. æµ‹è¯•è¿æ¥

æ·»åŠ å¯†é’¥åï¼Œå†æ¬¡æµ‹è¯• SSH è¿æ¥ï¼š

```
ssh -T -p 2224 git@192.168.137.136
```

å¦‚æœæˆåŠŸï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ° "Welcome to GitLab, @ç”¨æˆ·å!" çš„æ¬¢è¿æ¶ˆæ¯ã€‚

### 7. ä½¿ç”¨ HTTPS ä½œä¸ºå¤‡é€‰æ–¹æ¡ˆ

å¦‚æœ SSH ä»ç„¶æ— æ³•å·¥ä½œï¼Œå¯ä»¥æš‚æ—¶ä½¿ç”¨ HTTPS å…‹éš†ä»“åº“ï¼š

```
git clone http://192.168.137.136:8929/root/test.git
```

ç³»ç»Ÿä¼šæç¤ºæ‚¨è¾“å…¥ GitLab çš„ç”¨æˆ·åå’Œå¯†ç ã€‚

### 8. æ£€æŸ¥ SSH ä»£ç†

ç¡®ä¿ SSH ä»£ç†åœ¨è¿è¡Œå¹¶å·²æ·»åŠ æ‚¨çš„å¯†é’¥ï¼š

```
eval $(ssh-agent -s)
ssh-add ~/.ssh/id_ed25519
```

æŒ‰ç…§ä»¥ä¸Šæ­¥éª¤æ“ä½œåï¼Œæ‚¨åº”è¯¥èƒ½å¤ŸæˆåŠŸä½¿ç”¨ SSH è¿æ¥åˆ° GitLab å¹¶å…‹éš†ä»“åº“ã€‚å¦‚æœä»ç„¶æœ‰é—®é¢˜ï¼Œå¯èƒ½éœ€è¦æŸ¥çœ‹ GitLab æœåŠ¡å™¨ä¸Šçš„ SSH æ—¥å¿—ä»¥è·å–æ›´è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ã€‚

---

_**User**_

@config è¿™ä¸ªé…ç½®æ–‡ä»¶é‡Œçš„é‚£äº›å“ªä¸ªå…¬é’¥æ˜¯é…ç½®åœ¨gitlabæœåŠ¡å™¨ä¸Šçš„å‘¢ï¼Ÿ  ä¹Ÿå°±æ˜¯sshå¯†é’¥ï¼Œè®©æˆ‘æœ¬åœ°windows10å¯ä»¥è¿œç¨‹æ‹‰å–ä»£ç 

---

_**Assistant**_

<think>ä½ é—®çš„æ˜¯å“ªä¸ªå…¬é’¥æ˜¯é…ç½®åœ¨GitLabæœåŠ¡å™¨ä¸Šçš„ï¼Œç”¨äºè®©æœ¬åœ°Windows 10å¯ä»¥è¿œç¨‹æ‹‰å–ä»£ç ã€‚

åœ¨ä½ æä¾›çš„æ–‡ä»¶åˆ—è¡¨ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°ä»¥ä¸‹å‡ ä¸ªå…¬é’¥æ–‡ä»¶ï¼š
- ssh_host_ed25519_key.pub
- ssh_host_ecdsa_key.pub
- ssh_host_rsa_key.pub

è¿™äº›å…¬é’¥å®é™…ä¸Šæ˜¯GitLabæœåŠ¡å™¨çš„ä¸»æœºå¯†é’¥(host keys)ï¼Œè€Œä¸æ˜¯ç”¨äºç”¨æˆ·èº«ä»½éªŒè¯çš„å¯†é’¥ã€‚è¿™äº›å¯†é’¥çš„ä½œç”¨æ˜¯ï¼š
1. å½“SSHå®¢æˆ·ç«¯è¿æ¥åˆ°GitLabæœåŠ¡å™¨æ—¶ï¼ŒæœåŠ¡å™¨ä½¿ç”¨è¿™äº›å¯†é’¥æ¥è¯æ˜è‡ªå·±çš„èº«ä»½
2. å®¢æˆ·ç«¯ä¼šå°†è¿™äº›å¯†é’¥çš„æŒ‡çº¹å­˜å‚¨åœ¨known_hostsæ–‡ä»¶ä¸­
3. è¿™äº›å¯†é’¥ç”¨äºå»ºç«‹SSHè¿æ¥çš„å®‰å…¨é€šé“ï¼Œä½†ä¸ç”¨äºéªŒè¯ç”¨æˆ·èº«ä»½

å¯¹äºç”¨æˆ·èº«ä»½éªŒè¯ï¼ˆè®©ä½ ä»Windows 10æ‹‰å–ä»£ç ï¼‰ï¼Œæµç¨‹æ˜¯ç›¸åçš„ï¼š
1. ä½ éœ€è¦åœ¨æœ¬åœ°Windows 10æœºå™¨ä¸Šç”Ÿæˆä¸€ä¸ªSSHå¯†é’¥å¯¹ï¼ˆç§é’¥å’Œå…¬é’¥ï¼‰
2. å°†ä½ çš„å…¬é’¥æ·»åŠ åˆ°GitLabçš„ç”¨æˆ·è´¦æˆ·ä¸­
3. å½“ä½ è¿æ¥åˆ°GitLabæ—¶ï¼Œä½ çš„SSHå®¢æˆ·ç«¯ä½¿ç”¨ä½ çš„ç§é’¥è¿›è¡Œèº«ä»½éªŒè¯

å› æ­¤ï¼Œè¿™äº›æ–‡ä»¶å¤¹ä¸­çš„å…¬é’¥éƒ½ä¸æ˜¯ç”¨äºè®©ä½ çš„Windows 10æœºå™¨è¿œç¨‹æ‹‰å–ä»£ç çš„å¯†é’¥ã€‚ä½ éœ€è¦åœ¨GitLabçš„Webç•Œé¢ä¸­ï¼Œæ·»åŠ ä½ è‡ªå·±çš„å…¬é’¥ã€‚</think># GitLab SSHå¯†é’¥é…ç½®è¯´æ˜

æ‚¨çœ‹åˆ°çš„è¿™äº›å¯†é’¥æ–‡ä»¶ï¼ˆ`ssh_host_ed25519_key.pub`ã€`ssh_host_ecdsa_key.pub` å’Œ `ssh_host_rsa_key.pub`ï¼‰**ä¸æ˜¯**ç”¨äºå®¢æˆ·ç«¯èº«ä»½éªŒè¯çš„å¯†é’¥ï¼Œè€Œæ˜¯ GitLab æœåŠ¡å™¨è‡ªèº«çš„ SSH ä¸»æœºå¯†é’¥ï¼ˆHost Keysï¼‰ã€‚

## æœåŠ¡å™¨å¯†é’¥ä¸å®¢æˆ·ç«¯å¯†é’¥çš„åŒºåˆ«

### æœåŠ¡å™¨ç«¯å¯†é’¥ (æ‚¨åˆ—å‡ºçš„è¿™äº›æ–‡ä»¶)
- è¿™äº›æ˜¯ GitLab æœåŠ¡å™¨çš„èº«ä»½è¯æ˜
- å½“æ‚¨è¿æ¥åˆ°æœåŠ¡å™¨æ—¶ï¼Œè¿™äº›å¯†é’¥ç”¨äºè¯æ˜æœåŠ¡å™¨çš„èº«ä»½
- æ‚¨ç¬¬ä¸€æ¬¡è¿æ¥æ—¶çœ‹åˆ°çš„ "The authenticity of host... can't be established" æç¤ºï¼Œå°±æ˜¯å…³äºè¿™äº›å¯†é’¥çš„

### å®¢æˆ·ç«¯å¯†é’¥ (æ‚¨éœ€è¦é…ç½®çš„)
- éœ€è¦åœ¨æ‚¨çš„ Windows 10 ç”µè„‘ä¸Šç”Ÿæˆ
- å…¬é’¥éœ€è¦ä¸Šä¼ åˆ° GitLab ç”¨æˆ·è®¾ç½®ä¸­
- ç”¨äºå‘ GitLab è¯æ˜æ‚¨çš„èº«ä»½

## æ‚¨éœ€è¦æ‰§è¡Œçš„æ“ä½œ

1. **åœ¨æ‚¨çš„ Windows ç”µè„‘ä¸Šç”Ÿæˆ SSH å¯†é’¥å¯¹**ï¼š
   ```
   ssh-keygen -t ed25519
   ```

2. **æŸ¥çœ‹å¹¶å¤åˆ¶æ‚¨çš„å…¬é’¥**ï¼š
   ```
   type C:\Users\æ‚¨çš„ç”¨æˆ·å\.ssh\id_ed25519.pub
   ```

3. **å°†æ‚¨çš„å…¬é’¥æ·»åŠ åˆ° GitLab**ï¼š
   - è®¿é—® GitLab ç½‘é¡µç•Œé¢ (http://192.168.137.136:8929)
   - ç™»å½•åˆ°æ‚¨çš„è´¦æˆ·
   - ç‚¹å‡»å³ä¸Šè§’çš„å¤´åƒ â†’ åå¥½è®¾ç½® â†’ SSH å¯†é’¥
   - å°†æ‚¨å¤åˆ¶çš„å…¬é’¥ç²˜è´´åˆ°è¾“å…¥æ¡†ä¸­
   - ç‚¹å‡»"æ·»åŠ å¯†é’¥"æŒ‰é’®

GitLab æœåŠ¡å™¨ä¸Šçš„ SSH ä¸»æœºå¯†é’¥ï¼ˆæ‚¨åˆ—å‡ºçš„é‚£äº›ï¼‰æ˜¯è‡ªåŠ¨ç”Ÿæˆå¹¶é…ç½®çš„ï¼Œæ‚¨ä¸éœ€è¦ä¿®æ”¹å®ƒä»¬ã€‚æ‚¨éœ€è¦é…ç½®çš„æ˜¯æ‚¨è‡ªå·±çš„å®¢æˆ·ç«¯å¯†é’¥ï¼Œå¹¶å°†å…¶å…¬é’¥éƒ¨åˆ†æ·»åŠ åˆ° GitLab çš„ç”¨æˆ·è®¾ç½®ä¸­ã€‚

è¿™æ ·ï¼Œå½“æ‚¨ä½¿ç”¨ SSH åè®®è®¿é—® GitLab æ—¶ï¼ŒæœåŠ¡å™¨å¯ä»¥é€šè¿‡æ‚¨æä¾›çš„å…¬é’¥éªŒè¯æ‚¨çš„èº«ä»½ï¼Œè€Œä¸éœ€è¦è¾“å…¥å¯†ç ã€‚

---



---

